(this["webpackJsonpmarvel-web-components"]=this["webpackJsonpmarvel-web-components"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),l=a.n(c),u=a(1),s=a(2),o=a.n(s),i=a(3),m=r.a.createContext(null),f=r.a.createContext(0),v=r.a.createContext(null),b=r.a.createContext(null),p=(a(13),function(){var e=Object(n.useContext)(b),t=Object(n.useContext)(f),a=Object(n.useContext)(v),c=0===t.value,l=Math.ceil(a.value/20),u=t.value/20+1,s=l===u,o=l>1&&!e.value;return r.a.createElement("nav",{className:"navigation"},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,u," / ",l),r.a.createElement("button",{onClick:function(){return t.set(t.value-20)},disabled:c},"\u276e"),r.a.createElement("button",{onClick:function(){return t.set(t.value+20)},disabled:s},"\u276f")))}),d=(a(14),function(){var e=Object(n.useContext)(m),t=Object(n.useContext)(f),a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],s=c[1];return r.a.createElement("header",null,r.a.createElement("h1",null,"M",r.a.createElement("span",null,"ARVEL")),r.a.createElement("form",{className:"search",onSubmit:function(a){a.preventDefault(),e.set(l),t.set(null)}},r.a.createElement("input",{type:"text",onChange:function(e){return s(e.target.value)},value:l}),r.a.createElement("input",{type:"submit",value:"\ud83d\udd0e"})),r.a.createElement(p,null))}),E=(a(15),function(e){var t=e.character,a=function(e){var t=e.thumbnail;return"".concat(t.path,"/standard_medium.").concat(t.extension)}(t),c=Object(n.useContext)(b),l=Object(n.useCallback)((function(){return c.set(t)}),[t,c]);return r.a.createElement("button",{className:"character",onClick:l},r.a.createElement("img",{className:"avatar",src:a,alt:t.name}),r.a.createElement("span",{className:"name"},t.name))}),h=function(e){var t=e.message;return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,t))},j=(a(16),function(e){var t=e.characters;return t.length?r.a.createElement("ul",{className:"characters"},t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(E,{character:e}))}))):r.a.createElement(h,{message:"Aucun r\xe9sultat."})}),O=(a(17),function(e){var t=e.centered;return r.a.createElement("div",{className:"loader ".concat(t?"loader--centered":"")},"Chargement ...")}),g=a(6),k="930e43a8496c8cc563f2d22c2b2c764d",x=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,l,u,s,i,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,n=t.offset,r=t.total,c=a.value?"&nameStartsWith=".concat(a.value):"",l=n.value?"&offset=".concat(n.value):"",e.next=5,fetch("https://gateway.marvel.com:443/v1/public/characters?apikey=".concat(k).concat(c).concat(l));case 5:return u=e.sent,e.next=8,u.json();case 8:return s=e.sent,i=s.data,m=i.results,n.set(i.offset),r.set(i.total),e.abrupt("return",m);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"?apikey=").concat(k));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,r=n.data,c=r.results,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.thumbnail;return t?"".concat(t.path,"/portrait_medium.").concat(t.extension):"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/portrait_medium.jpg"},N=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setStatus,n=t.setCollection,r=t.URI,a("loading"),e.next=4,C(r);case 4:(c=e.sent)?(l=c.map((function(e){return Object(g.a)({},e,{src:y(e)})})),n(l),a("ok")):a("error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=e.URI,a=Object(n.useState)(null),c=Object(u.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)([]),i=Object(u.a)(o,2),m=i[0],f=i[1];return Object(n.useEffect)((function(){N({setStatus:s,setCollection:f,URI:t})}),[t]),r.a.createElement("div",{className:"tab-content__item"},{ok:r.a.createElement(r.a.Fragment,null,m&&m.length?r.a.createElement("ul",{className:"references-list"},m.map((function(e){var t=e.src,a=e.title;return r.a.createElement("li",{key:a},r.a.createElement("img",{src:t,alt:a}),a)}))):r.a.createElement("p",{className:"tab-content__message"},"Cette collection est vide.")),loading:r.a.createElement(O,{centered:!0}),error:r.a.createElement(h,{message:"Impossible d'afficher les r\xe9f\xe9rences de ce personnage \xe0 cause d'une erreur technique."})}[l])},_=[{key:"comics",label:"Comics"},{key:"series",label:"Series"},{key:"stories",label:"Stories"},{key:"events",label:"Events"}],w=(a(18),function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(b);return r.a.createElement("div",{className:"references"},r.a.createElement("nav",{className:"tabs","data-current":a},_.map((function(e,t){return r.a.createElement("button",{key:t,onClick:function(){return c(t)}},e.label)}))),r.a.createElement("div",{className:"tab-content","data-current":a},_.map((function(e){return r.a.createElement(S,{key:l.value[e.key].collectionURI,URI:l.value[e.key].collectionURI})}))))}),I=(a(19),function(){var e=Object(n.useContext)(b),t=e.value?"character-details--visible":"",a=e.value?"".concat(e.value.thumbnail.path,"/standard_xlarge.").concat(e.value.thumbnail.extension):null;return r.a.createElement("div",{className:"character-details ".concat(t)},e.value&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bio"},r.a.createElement("img",{className:"bio__avatar",src:a,alt:e.name}),r.a.createElement("h2",{className:"bio__title"},e.name),r.a.createElement("p",{className:"bio__description"},e.description)),r.a.createElement(w,null),r.a.createElement("button",{className:"character-details__close",onClick:function(){return e.set(null)}},"Fermer")))}),R=(a(20),function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.setStatus,n=t.setCharacters,r=t.query,c=t.offset,l=t.total,a("loading"),e.next=4,x({query:r,offset:c,total:l});case 4:(u=e.sent)?(n(u),a("ok")):a("error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=function(){var e,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(null),o=Object(u.a)(s,2),i=o[0],p=o[1],E=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2);return{value:t[0],set:t[1]}}(),g=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2);return{value:t[0],set:t[1]}}(),k=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2);return{value:t[0],set:t[1]}}(),x=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2);return{value:t[0],set:t[1]}}();return Object(n.useEffect)((e={setStatus:l,setCharacters:p,query:g,offset:x,total:k},function(){R(e)}),[g.value,x.value]),r.a.createElement(v.Provider,{value:k},r.a.createElement(f.Provider,{value:x},r.a.createElement(m.Provider,{value:g},r.a.createElement(b.Provider,{value:E},r.a.createElement(d,null),r.a.createElement("main",null,{loading:r.a.createElement(O,{centered:!0}),error:r.a.createElement(h,{message:"Impossible de d'afficher la liste des personnages \xe0 cause d'une erreur technique."}),ok:r.a.createElement(j,{characters:i})}[c],r.a.createElement(I,null))))))};l.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.947d11d2.chunk.js.map