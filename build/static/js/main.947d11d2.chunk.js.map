{"version":3,"sources":["contexts.js","Navigation/index.js","Navigation/Navigation.js","Header/index.js","Header/Header.js","Character/index.js","Character/Character.js","Error/index.js","Error/Error.js","Characters/index.js","Characters/Characters.js","Loader/index.js","Loader/Loader.js","config.js","services.js","Collection/Collection.js","Collection/index.js","constants.js","References/index.js","References/References.js","CharacterDetails/index.js","CharacterDetails/CharacterDetails.js","App/App.js","App/index.js","index.js"],"names":["Query","React","createContext","Offset","Total","Details","Navigation","details","useContext","offset","total","isFirst","value","numberOfPages","Math","ceil","currentPage","isLast","isVisible","className","onClick","set","disabled","Header","query","useState","currentQuery","setCurrentQuery","onSubmit","e","preventDefault","type","onChange","target","Character","character","src","thumbnail","path","extension","getSrc","displayDetails","useCallback","alt","name","Error","message","Characters","characters","length","map","index","key","Loader","centered","apiKey","fetchCharacters","a","current","fetch","res","json","data","results","fetchCollection","url","getCollection","setStatus","setCollection","URI","collection","enhancedCollection","item","Collection","status","useEffect","ok","title","loading","error","categories","label","References","setCurrent","data-current","category","collectionURI","CharacterDetails","description","getCharacters","setCharacters","App","params","useDetails","useQuery","useTotal","useOffset","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.947d11d2.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nexport const Query = React.createContext(null);\nexport const Offset = React.createContext(0);\nexport const Total = React.createContext(null);\nexport const Details = React.createContext(null);\n\nexport const useQuery = () => {\n  const [value, set] = useState(null);\n  return { value, set };\n};\n\nexport const useDetails = () => {\n  const [value, set] = useState(null);\n  return { value, set };\n};\n\nexport const useTotal = () => {\n  const [value, set] = useState(null);\n  return { value, set };\n};\n\nexport const useOffset = () => {\n  const [value, set] = useState(null);\n  return { value, set };\n};","import Navigation from './Navigation';\nexport default Navigation;","import React, { useContext } from 'react';\nimport { Details, Offset, Total } from '../contexts';\nimport './Navigation.scss';\n\nconst Navigation = () => {\n  const details = useContext(Details);\n  const offset = useContext(Offset);\n  const total = useContext(Total);\n\n  const isFirst = offset.value === 0;\n  const numberOfPages = Math.ceil(total.value / 20);\n  const currentPage = offset.value / 20 + 1;\n  const isLast = numberOfPages === currentPage;\n  const isVisible = numberOfPages > 1 && !details.value;\n\n  const decrement = () => offset.set(offset.value - 20);\n  const increment = () => offset.set(offset.value + 20);\n\n  return (\n    <nav className=\"navigation\">\n      {isVisible && (\n        <>\n          <span>{currentPage} / {numberOfPages}</span>\n          <button onClick={decrement} disabled={isFirst}>❮</button>\n          <button onClick={increment} disabled={isLast}>❯</button>\n        </>\n      )}\n    </nav>\n  )\n};\n\nexport default Navigation;","import Header from './Header';\nexport default Header;","import React, { useState, useContext } from 'react';\nimport Navigation from '../Navigation';\nimport { Query, Offset } from '../contexts';\nimport './Header.scss';\n\nconst Header = () => {\n  const query = useContext(Query);\n  const offset = useContext(Offset);\n  const [currentQuery, setCurrentQuery] = useState('');\n  \n  const onSubmit = e => {\n    e.preventDefault();\n    query.set(currentQuery);\n    offset.set(null);\n  };\n\n  const onChange = e => setCurrentQuery(e.target.value);\n\n  return (\n    <header>\n      <h1>M<span>ARVEL</span></h1>\n      <form className=\"search\" onSubmit={onSubmit}>\n        <input type=\"text\" onChange={onChange} value={currentQuery} />\n        <input type=\"submit\" value=\"🔎\" />\n      </form>\n      <Navigation />\n    </header>\n  );\n};\n\nexport default Header;","import Character from './Character';\nexport default Character;","import React, { useCallback, useContext } from 'react';\nimport { Details } from '../contexts';\nimport './Character.scss';\n\nconst getSrc = ({ thumbnail }) => `${thumbnail.path}/standard_medium.${thumbnail.extension}`;\n\nconst Character = ({ character }) => {\n  const src = getSrc(character);\n  const details = useContext(Details);\n\n  const displayDetails = useCallback(() => details.set(character), [character, details]);\n\n  return (\n    <button className=\"character\" onClick={displayDetails}>\n      <img className=\"avatar\" src={src} alt={character.name}/>\n      <span className=\"name\">{character.name}</span>\n    </button>\n  );\n};\n\nexport default Character;","import Error from './Error';\nexport default Error;","import React from 'react';\n\nconst Error = ({ message }) => (\n  <div className=\"error\">\n    <p>\n      {message}\n    </p>\n  </div>\n);\n\nexport default Error;","import Characters from './Characters';\nexport default Characters;","import React from 'react';\nimport Character from '../Character';\nimport Error from '../Error';\n\nimport './Characters.scss';\n\nconst Characters = ({ characters }) => characters.length ? (\n  <ul className=\"characters\">\n    {characters.map((character, index) => (\n      <li key={index}>\n        <Character character={character} />\n      </li>\n    ))}\n  </ul>\n) : (\n  <Error message=\"Aucun résultat.\" />\n)\n\nexport default Characters;","import Loader from './Loader';\nexport default Loader;","import React from 'react';\nimport './Loader.scss';\n\nconst Loader = ({ centered }) => (\n  <div className={`loader ${centered ? 'loader--centered' : ''}`}>\n    Chargement ...\n  </div>\n);\n\nexport default Loader;","export const apiKey = '930e43a8496c8cc563f2d22c2b2c764d';","import { apiKey } from './config';\n\nexport const fetchCharacters = async ({ query, offset, total }) => {\n  const name = query.value ? `&nameStartsWith=${query.value}` : '';\n  const current = offset.value ? `&offset=${offset.value}` : '';\n\n  const res = await fetch(`https://gateway.marvel.com:443/v1/public/characters?apikey=${apiKey}${name}${current}`);\n  const { data } = await res.json();\n  const { results } = data;\n\n  offset.set(data.offset);\n  total.set(data.total);\n\n  return results;\n}\n\nexport const fetchCollection = async url => {\n  const res = await fetch(`${url}?apikey=${apiKey}`);\n  const { data } = await res.json();\n  const { results } = data;\n\n  return results\n}","import React, { useState, useEffect } from 'react';\nimport Loader from '../Loader';\nimport Error from '../Error';\nimport { fetchCollection } from '../services';\n\nconst getSrc = ({ thumbnail }) => thumbnail ? `${thumbnail.path}/portrait_medium.${thumbnail.extension}` : \"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available/portrait_medium.jpg\";\n\nconst getCollection = async ({ setStatus, setCollection, URI }) => {\n  setStatus('loading');\n  const collection = await fetchCollection(URI);\n\n  if(collection) {\n    const enhancedCollection = collection.map(item => ({\n      ...item,\n      src: getSrc(item)\n    }))\n    \n    setCollection(enhancedCollection);\n    setStatus('ok');\n  } else {\n    setStatus('error');\n  }\n};\n\nconst Collection = ({ URI }) => {\n  const [status, setStatus] = useState(null);\n  const [collection, setCollection] = useState([]);\n\n  useEffect(() => {\n    getCollection({ setStatus, setCollection, URI })\n  }, [URI]);\n\n  return (\n    <div className=\"tab-content__item\">\n      {{\n        ok: (\n          <>\n            {collection && collection.length ? (\n              <ul className=\"references-list\">\n                {collection.map(({ src, title }) => (\n                  <li key={title}>\n                    <img src={src} alt={title}/>\n                    {title}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <p className=\"tab-content__message\">Cette collection est vide.</p>\n            )}\n          </>\n        ),\n        loading: <Loader centered/>,\n        error: <Error message=\"Impossible d'afficher les références de ce personnage à cause d'une erreur technique.\" />\n      }[status]}\n    </div>\n  )\n};\n\nexport default Collection;","import Collection from './Collection';\nexport default Collection;","export const categories = [\n  {\n    key: 'comics',\n    label: 'Comics'\n  },\n  {\n    key: 'series',\n    label: 'Series'\n  },\n  {\n    key: 'stories',\n    label: 'Stories',\n  },\n  {\n    key: 'events',\n    label: 'Events'\n  }\n];","import References from './References';\nexport default References;","import React, { useState, useContext } from 'react';\nimport Collection from '../Collection';\nimport { Details } from '../contexts';\nimport { categories } from '../constants';\nimport './References.scss';\n\nconst References = () => {\n  const [current, setCurrent] = useState(0)\n  const details = useContext(Details);\n\n  return (\n    <div className=\"references\">\n      <nav className=\"tabs\" data-current={current}>\n        {categories.map((category, index) => (\n          <button key={index} onClick={() => setCurrent(index)}>{category.label}</button>\n        ))}\n      </nav>\n      <div className=\"tab-content\" data-current={current}>\n        {categories.map(category => <Collection key={details.value[category.key].collectionURI} URI={details.value[category.key].collectionURI} />)}\n      </div>\n    </div>\n  )\n};\n\nexport default References;","import CharacterDetails from './CharacterDetails';\nexport default CharacterDetails;","import React, { useContext } from 'react';\nimport { Details } from '../contexts';\nimport References from '../References';\nimport './CharacterDetails.scss';\n\nconst CharacterDetails = () => {\n  const details = useContext(Details);\n\n  const close = () => details.set(null);\n  const className = details.value ? 'character-details--visible' : '';\n  const src = details.value ? `${details.value.thumbnail.path}/standard_xlarge.${details.value.thumbnail.extension}` : null;\n\n  return (\n    <div className={`character-details ${className}`}>\n      {details.value && (\n        <>\n          <div className=\"bio\">\n            <img className=\"bio__avatar\" src={src} alt={details.name} />\n            <h2 className=\"bio__title\">{details.name}</h2>\n            <p className=\"bio__description\">{details.description}</p>\n          </div>\n          <References />\n          <button className=\"character-details__close\" onClick={close}>Fermer</button>\n        </>\n      )}\n    </div>\n  )\n};\n\nexport default CharacterDetails;","import React, { useState, useEffect } from 'react';\nimport Header from '../Header';\nimport Characters from '../Characters';\nimport Error from '../Error';\nimport Loader from '../Loader';\nimport CharacterDetails from '../CharacterDetails';\nimport { fetchCharacters } from '../services';\nimport { Query, Details, Total, Offset, useQuery, useDetails, useTotal, useOffset } from '../contexts';\nimport './App.scss';\n\nconst getCharacters = async ({ setStatus, setCharacters, query, offset, total }) => {\n  setStatus('loading');\n  const characters = await fetchCharacters({ query, offset, total });\n\n  if(characters) {\n    setCharacters(characters);\n    setStatus('ok');\n  } else {\n    setStatus('error');\n  }\n};\n\nconst updateCharacters = params => () => {\n  getCharacters(params);\n};\n\nconst App = () => {\n  const [status, setStatus] = useState(null);\n  const [characters, setCharacters] = useState(null);\n\n  const details = useDetails();\n  const query = useQuery();\n  const total = useTotal();\n  const offset = useOffset();\n\n  useEffect(updateCharacters({ setStatus, setCharacters, query, offset, total }), [query.value, offset.value]);\n\n  return (\n    <Total.Provider value={total}>\n      <Offset.Provider value={offset}>\n        <Query.Provider value={query}>\n          <Details.Provider value={details}>\n            <Header />\n            <main>\n              {{\n                loading: <Loader centered />,\n                error: <Error message=\"Impossible de d'afficher la liste des personnages à cause d'une erreur technique.\" />,\n                ok: <Characters characters={characters} />\n              }[status]}\n              <CharacterDetails/>\n            </main>\n          </Details.Provider>\n        </Query.Provider>\n      </Offset.Provider>\n    </Total.Provider>\n  );\n};\n\nexport default App;","import App from './App';\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}